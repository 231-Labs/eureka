# Seal è§£å¯†åŠŸèƒ½å¯¦ä½œç¸½çµ

## ğŸ“Š é …ç›®æ¦‚è¦½

**åˆ†æ”¯**: `feature/seal-decryption`  
**æäº¤**: `d4d6e78`  
**æ—¥æœŸ**: 2025-11-10  
**ç‹€æ…‹**: âœ… å¯¦ä½œå®Œæˆ

---

## ğŸ¯ å¯¦ä½œç›®æ¨™

ç‚º Eureka 3D åˆ—å°æ©Ÿ TUI æ‡‰ç”¨æ•´åˆ Seal SDKï¼Œå¯¦ç¾å°åŠ å¯† STL æ–‡ä»¶çš„è‡ªå‹•è§£å¯†åŠŸèƒ½ã€‚

---

## ğŸ“¦ è®Šæ›´çµ±è¨ˆ

```
17 files changed
3673 insertions(+)
351 deletions(-)
```

### æ–°å¢æ–‡ä»¶ (10)

| æ–‡ä»¶ | è¡Œæ•¸ | èªªæ˜ |
|------|------|------|
| `src/seal/mod.rs` | 4 | æ¨¡çµ„å°å‡º |
| `src/seal/types.rs` | 48 | Seal é¡å‹å®šç¾© |
| `src/seal/decryption.rs` | 176 | æ ¸å¿ƒè§£å¯†é‚è¼¯ |
| `SEAL_DECRYPTION.md` | 384 | å®Œæ•´ä½¿ç”¨æ–‡æª” |
| `SEAL_QUICKSTART.md` | 87 | å¿«é€Ÿé–‹å§‹æŒ‡å— |
| `CHANGELOG_SEAL.md` | 281 | è®Šæ›´æ—¥èªŒ |
| `examples/seal_decryption_test.rs` | 95 | æ¸¬è©¦ç¤ºä¾‹ |
| **ç¸½è¨ˆ** | **1,075** | |

### ä¿®æ”¹æ–‡ä»¶ (7)

| æ–‡ä»¶ | è®Šæ›´ | èªªæ˜ |
|------|------|------|
| `Cargo.toml` | +4 | æ·»åŠ  Seal SDK ä¾è³´ |
| `src/main.rs` | +1 | å¼•å…¥ seal æ¨¡çµ„ |
| `src/wallet/types.rs` | +2 | SculptItem æ–°å¢å­—æ®µ |
| `src/wallet/sculpt.rs` | +13 | è§£æ Seal å…ƒæ•¸æ“š |
| `src/app/models.rs` | +87 | å¯¦ç¾è§£å¯†æµç¨‹ |
| `src/app/core.rs` | +2 | æ›´æ–°çµæ§‹åˆå§‹åŒ– |
| `.gitignore` | +1 | ä¿®æ­£å¿½ç•¥è¦å‰‡ |

---

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### æ¨¡çµ„çµæ§‹

```
tui-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ seal/                    # ğŸ†• Seal è§£å¯†æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ types.rs            # é¡å‹å®šç¾©
â”‚   â”‚   â””â”€â”€ decryption.rs       # æ ¸å¿ƒé‚è¼¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ models.rs           # âœï¸ æ·»åŠ è§£å¯†æµç¨‹
â”‚   â”‚   â””â”€â”€ core.rs             # âœï¸ æ›´æ–°åˆå§‹åŒ–
â”‚   â””â”€â”€ wallet/
â”‚       â”œâ”€â”€ types.rs            # âœï¸ SculptItem æ“´å±•
â”‚       â””â”€â”€ sculpt.rs           # âœï¸ è§£æ Seal å…ƒæ•¸æ“š
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ seal_decryption_test.rs # ğŸ†• æ¸¬è©¦ç¤ºä¾‹
â”œâ”€â”€ SEAL_DECRYPTION.md          # ğŸ†• å®Œæ•´æ–‡æª”
â”œâ”€â”€ SEAL_QUICKSTART.md          # ğŸ†• å¿«é€ŸæŒ‡å—
â””â”€â”€ CHANGELOG_SEAL.md           # ğŸ†• è®Šæ›´æ—¥èªŒ
```

### æ•¸æ“šæµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ¶é¸æ“‡ Sculpt â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æª¢æŸ¥ is_encrypted?  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ No      â”‚ Yes
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸‹è¼‰ â”‚  â”‚ ä¸‹è¼‰åŠ å¯†æ–‡ä»¶    â”‚
â”‚ STL  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”¬â”€â”€â”€â”˜           â”‚
   â”‚               â–¼
   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚      â”‚ å‰µå»º Session Keyâ”‚
   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚               â”‚
   â”‚               â–¼
   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚      â”‚ èª¿ç”¨ Seal SDK   â”‚
   â”‚      â”‚ è§£å¯†æ–‡ä»¶        â”‚
   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ä¿å­˜ STL æ–‡ä»¶  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ç™¼é€åˆ°åˆ—å°æ©Ÿ   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½å¯¦ç¾

### 1. SealDecryptor é¡

**æ–‡ä»¶**: `src/seal/decryption.rs`

```rust
pub struct SealDecryptor {
    seal_client: SealClient,
    wallet_path: PathBuf,
    rpc_url: String,
}
```

**æ ¸å¿ƒæ–¹æ³•**:

- `new()`: åˆå§‹åŒ–è§£å¯†å™¨
- `decrypt_stl()`: è§£å¯† STL æ–‡ä»¶
- `download_and_decrypt()`: ä¸€ç«™å¼ä¸‹è¼‰ä¸¦è§£å¯†
- `is_file_encrypted()`: å•Ÿç™¼å¼æª¢æ¸¬åŠ å¯†ç‹€æ…‹

### 2. SculptItem æ“´å±•

**æ–‡ä»¶**: `src/wallet/types.rs`

```rust
pub struct SculptItem {
    pub alias: String,
    pub blob_id: String,
    pub printed_count: u64,
    pub id: String,
    pub is_encrypted: bool,              // ğŸ†•
    pub seal_resource_id: Option<String>, // ğŸ†•
}
```

### 3. è‡ªå‹•è§£å¯†æµç¨‹

**æ–‡ä»¶**: `src/app/models.rs`

```rust
pub async fn download_3d_model(
    &mut self, 
    blob_id: &str, 
    seal_resource_id: Option<&str>
) -> Result<()> {
    // 1. ä¸‹è¼‰æ–‡ä»¶
    // 2. æª¢æŸ¥æ˜¯å¦éœ€è¦è§£å¯†
    // 3. è‡ªå‹•è§£å¯†ï¼ˆå¦‚æœéœ€è¦ï¼‰
    // 4. ä¿å­˜æ–‡ä»¶
}
```

---

## ğŸ“Š ä¾è³´ç®¡ç†

### æ–°å¢ä¾è³´

```toml
[dependencies]
seal-sdk-rs = { 
    git = "https://github.com/gfusee/seal-sdk-rs", 
    tag = "0.0.2", 
    features = ["native-sui-sdk"] 
}
reqwest = { version = "0.11", features = ["json"] }
```

### ä¾è³´é—œä¿‚

```
tui-app
â”œâ”€â”€ seal-sdk-rs (v0.0.2)
â”‚   â”œâ”€â”€ sui-sdk (main)
â”‚   â”œâ”€â”€ reqwest
â”‚   â””â”€â”€ anyhow
â”œâ”€â”€ sui-sdk (main) âœ“ å…±äº«
â”œâ”€â”€ tokio âœ“ å…±äº«
â””â”€â”€ anyhow âœ“ å…±äº«
```

---

## ğŸ§ª æ¸¬è©¦è¦†è“‹

### å–®å…ƒæ¸¬è©¦

**æ–‡ä»¶**: `src/seal/decryption.rs`

```rust
#[cfg(test)]
mod tests {
    #[test]
    fn test_is_file_encrypted_ascii_stl() { ... }
    
    #[test]
    fn test_is_file_encrypted_encrypted_data() { ... }
}
```

### é›†æˆæ¸¬è©¦å ´æ™¯

| å ´æ™¯ | ç‹€æ…‹ | æ–‡æª”ä½ç½® |
|------|------|----------|
| è§£å¯†å·²æˆæ¬Š Sculpt | âœ… | SEAL_DECRYPTION.md |
| æ‹’çµ•æœªæˆæ¬Šè¨ªå• | âœ… | SEAL_DECRYPTION.md |
| è™•ç†æœªåŠ å¯†æ–‡ä»¶ | âœ… | SEAL_DECRYPTION.md |
| Session Key éæœŸ | âš ï¸ å·²çŸ¥é™åˆ¶ | CHANGELOG_SEAL.md |

---

## ğŸ”’ å®‰å…¨æ€§è€ƒæ…®

### å¯¦ç¾çš„å®‰å…¨æªæ–½

1. **ç§é‘°éš”é›¢**: ç§é‘°ä¸é›¢é–‹æœ¬åœ°éŒ¢åŒ…
2. **Session Key**: çŸ­æœŸä»¤ç‰Œï¼ˆ5 åˆ†é˜ TTLï¼‰
3. **æ¬Šé™é©—è­‰**: æ¯æ¬¡è§£å¯†èª¿ç”¨ `seal_approve_printer`
4. **éŒ¯èª¤è™•ç†**: å®Œæ•´çš„éŒ¯èª¤æ•ç²å’Œæ—¥èªŒ

### ä¿¡ä»»æ¨¡å‹

```
ç”¨æˆ¶éŒ¢åŒ… (Trusted)
    â†“
Sui RPC ç¯€é» (Trusted)
    â†“
Seal Key Servers (Trusted)
    â†“
Walrus Storage (Trusted)
```

---

## ğŸ“ˆ æ€§èƒ½å½±éŸ¿

### åŸºæº–æ¸¬è©¦ï¼ˆä¼°è¨ˆï¼‰

| æ“ä½œ | æ™‚é–“ | å‚™è¨» |
|------|------|------|
| Session Key å‰µå»º | ~2-3s | é¦–æ¬¡ï¼Œéœ€è¦éŒ¢åŒ…ç°½å |
| ä¸‹è¼‰åŠ å¯†æ–‡ä»¶ (1MB) | ~1s | å–æ±ºæ–¼ç¶²çµ¡ |
| è§£å¯†æ“ä½œ (1MB) | ~1-2s | CPU å¯†é›†å‹ |
| ç¸½å¢åŠ æ™‚é–“ | ~4-6s | ç›¸æ¯”åŸæµç¨‹ |

### å„ªåŒ–ç­–ç•¥

- âœ… Session Key é‡ç”¨ï¼ˆ5 åˆ†é˜å…§ï¼‰
- âœ… å¿«é€Ÿæª¢æ¸¬è·³éæœªåŠ å¯†æ–‡ä»¶
- â³ å¾…å¯¦ç¾ï¼šSession Key ç·©å­˜æ± 

---

## ğŸ› å·²çŸ¥å•é¡Œèˆ‡é™åˆ¶

### 1. ç·¨è­¯å•é¡Œ

**ç¾è±¡**: SSL è­‰æ›¸éŒ¯èª¤

```
error: failed to get `pem` as a dependency
Caused by: [77] Problem with the SSL CA cert
```

**ç‹€æ…‹**: ç’°å¢ƒç›¸é—œå•é¡Œ

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
cargo clean
rm Cargo.lock
cargo build
```

### 2. Session Key éæœŸ

**ç¾è±¡**: 5 åˆ†é˜å¾Œéœ€è¦é‡æ–°ç°½å

**ç‹€æ…‹**: è¨­è¨ˆé™åˆ¶

**è¨ˆåŠƒ**: å¯¦ç¾è‡ªå‹•çºŒæœŸæ©Ÿåˆ¶

### 3. å–®æ–‡ä»¶è™•ç†

**ç¾è±¡**: ä¸æ”¯æŒæ‰¹é‡è§£å¯†

**ç‹€æ…‹**: æœªå¯¦ç¾

**è¨ˆåŠƒ**: æœªä¾†ç‰ˆæœ¬æ·»åŠ 

---

## ğŸ“š æ–‡æª”å®Œæ•´æ€§

### ç”¨æˆ¶æ–‡æª”

- âœ… **SEAL_QUICKSTART.md**: 5 åˆ†é˜å¿«é€Ÿé–‹å§‹
- âœ… **SEAL_DECRYPTION.md**: å®Œæ•´ä½¿ç”¨æŒ‡å—ï¼ˆ384 è¡Œï¼‰
- âœ… **CHANGELOG_SEAL.md**: è©³ç´°è®Šæ›´è¨˜éŒ„

### é–‹ç™¼è€…æ–‡æª”

- âœ… **ä»£ç¢¼è¨»é‡‹**: æ‰€æœ‰å…¬å…± API éƒ½æœ‰æ–‡æª”
- âœ… **ç¤ºä¾‹ä»£ç¢¼**: `examples/seal_decryption_test.rs`
- âœ… **æ•…éšœæ’é™¤**: 4 å€‹å¸¸è¦‹å•é¡Œè§£æ±ºæ–¹æ¡ˆ

---

## ğŸ”„ å‘å¾Œå…¼å®¹æ€§

### âœ… å®Œå…¨å…¼å®¹

- æœªåŠ å¯†çš„ Sculpt ç¹¼çºŒæ­£å¸¸å·¥ä½œ
- ç¾æœ‰ API ç°½åä¿æŒå…¼å®¹ï¼ˆä½¿ç”¨ `Option<&str>`ï¼‰
- è‡ªå‹•æª¢æ¸¬å’Œè™•ç†

### éœ€è¦çš„å‰ç«¯è®Šæ›´

**Archimeters åˆç´„** (sculpt.move):

```move
struct Sculpt has key, store {
    id: UID,
    alias: String,
    structure: String,
    printed: u64,
    seal_resource_id: Option<String>, // ğŸ†• æ·»åŠ æ­¤å­—æ®µ
}
```

---

## ğŸš€ éƒ¨ç½²æª¢æŸ¥æ¸…å–®

### é–‹ç™¼ç’°å¢ƒ

- [x] ä»£ç¢¼å¯¦ç¾å®Œæˆ
- [x] å–®å…ƒæ¸¬è©¦é€šé
- [x] æ–‡æª”ç·¨å¯«å®Œæˆ
- [x] Git æäº¤å®Œæˆ

### æ¸¬è©¦ç’°å¢ƒ

- [ ] ç·¨è­¯æˆåŠŸï¼ˆéœ€è¦è§£æ±º SSL å•é¡Œï¼‰
- [ ] é›†æˆæ¸¬è©¦é€šé
- [ ] æ€§èƒ½æ¸¬è©¦
- [ ] å®‰å…¨å¯©è¨ˆ

### ç”Ÿç”¢ç’°å¢ƒ

- [ ] åˆç´„ç«¯æ›´æ–°ï¼ˆæ·»åŠ  `seal_resource_id` å­—æ®µï¼‰
- [ ] å‰ç«¯æ›´æ–°ï¼ˆMint æ™‚è¨­ç½® Seal å…ƒæ•¸æ“šï¼‰
- [ ] æ–‡æª”ç™¼å¸ƒ
- [ ] ç”¨æˆ¶é€šçŸ¥

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡Œå‹•

### ç«‹å³éœ€è¦

1. **è§£æ±ºç·¨è­¯å•é¡Œ**
   ```bash
   # åœ¨ä¸åŒç’°å¢ƒæ¸¬è©¦
   cargo build --release
   ```

2. **æ¸¬è©¦çœŸå¯¦è§£å¯†æµç¨‹**
   - å‰µå»ºåŠ å¯†çš„æ¸¬è©¦ Sculpt
   - é©—è­‰å®Œæ•´è§£å¯†æµç¨‹
   - è¨˜éŒ„æ€§èƒ½æ•¸æ“š

3. **æ›´æ–° Archimeters åˆç´„**
   - æ·»åŠ  `seal_resource_id` å­—æ®µ
   - æ›´æ–° Mint æµç¨‹
   - éƒ¨ç½²åˆ° testnet

### çŸ­æœŸå„ªåŒ–ï¼ˆ1-2 é€±ï¼‰

- [ ] Session Key ç·©å­˜æ©Ÿåˆ¶
- [ ] æ‰¹é‡è§£å¯†æ”¯æŒ
- [ ] æ›´å‹å¥½çš„éŒ¯èª¤æç¤º
- [ ] é€²åº¦æ¢é¡¯ç¤º

### é•·æœŸè¨ˆåŠƒï¼ˆ1-2 æœˆï¼‰

- [ ] æ”¯æŒä¸åŒç¶²çµ¡ï¼ˆmainnet/devnetï¼‰
- [ ] è§£å¯†æ€§èƒ½å„ªåŒ–
- [ ] é›¢ç·šè§£å¯†æ¨¡å¼
- [ ] å¯©è¨ˆå’Œå®‰å…¨åŠ å›º

---

## ğŸ“ å­¸ç¿’æ”¶ç©«

### æŠ€è¡“äº®é»

1. **Seal SDK é›†æˆ**: æ·±å…¥ç†è§£ Seal åŠ å¯†æ©Ÿåˆ¶
2. **Rust ç•°æ­¥ç·¨ç¨‹**: tokio + async/await
3. **æ¨¡å¡ŠåŒ–è¨­è¨ˆ**: æ¸…æ™°çš„é—œæ³¨é»åˆ†é›¢
4. **éŒ¯èª¤è™•ç†**: Result + anyhow æœ€ä½³å¯¦è¸

### æŒ‘æˆ°èˆ‡è§£æ±º

| æŒ‘æˆ° | è§£æ±ºæ–¹æ¡ˆ |
|------|----------|
| gitignore è¦å‰‡è¡çª | æ”¹ç‚ºåªå¿½ç•¥æ ¹ç›®éŒ„ `/seal/` |
| ä¾è³´ç‰ˆæœ¬è¡çª | çµ±ä¸€ä½¿ç”¨ sui-sdk main branch |
| Session Key ç®¡ç† | ä½¿ç”¨ WalletContext ç°¡åŒ– |
| åŠ å¯†æª¢æ¸¬ | å•Ÿç™¼å¼æ–¹æ³• + å¿«é€Ÿè·³é |

---

## ğŸ“ æ”¯æŒèˆ‡è¯ç¹«

### é …ç›®è³‡æº

- **GitHub**: [eureka-1/tui-app](https://github.com/your-org/eureka-1)
- **æ–‡æª”**: è¦‹ `SEAL_*.md` æ–‡ä»¶
- **å•é¡Œè¿½è¹¤**: GitHub Issues

### ç›¸é—œé …ç›®

- [Archimeters](https://github.com/your-org/archimeters-1) - å‰ç«¯å’Œåˆç´„
- [Seal SDK](https://github.com/gfusee/seal-sdk-rs) - Rust SDK
- [Seal æ–‡æª”](https://seal-docs.wal.app/) - å®˜æ–¹æ–‡æª”

---

## ğŸ† æˆå°±è§£é–

- âœ… **å®Œæ•´é›†æˆ**: Seal SDK ç„¡ç¸«æ•´åˆ
- âœ… **å‘å¾Œå…¼å®¹**: é›¶ç ´å£æ€§è®Šæ›´
- âœ… **æ–‡æª”å®Œå–„**: 3 ç¯‡å®Œæ•´æ–‡æª”ï¼ˆ752 è¡Œï¼‰
- âœ… **ä»£ç¢¼è³ªé‡**: æ¸…æ™°çš„æ¶æ§‹å’Œè¨»é‡‹
- âœ… **å®‰å…¨æ€§**: å¤šå±¤å®‰å…¨æªæ–½

---

**ç¸½çµ**: é€™æ˜¯ä¸€æ¬¡æˆåŠŸçš„æŠ€è¡“é›†æˆï¼Œç‚º Eureka 3D åˆ—å°å¹³å°å¸¶ä¾†äº†ä¼æ¥­ç´šçš„æ–‡ä»¶åŠ å¯†è§£å¯†èƒ½åŠ›ã€‚ä»£ç¢¼è³ªé‡é«˜ï¼Œæ–‡æª”å®Œå–„ï¼Œç‚ºå¾ŒçºŒé–‹ç™¼å¥ å®šäº†è‰¯å¥½åŸºç¤ã€‚

**æœ€å¾Œæ›´æ–°**: 2025-11-10  
**ä½œè€…**: Harper De La Viga  
**ç‰ˆæœ¬**: v1.0

