# Seal è§£å¯†åŠŸèƒ½æ•´åˆæ–‡æª”

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

Eureka TUI ç¾åœ¨æ”¯æŒè‡ªå‹•è§£å¯†ä½¿ç”¨ Seal SDK åŠ å¯†çš„ STL 3D æ¨¡å‹æª”æ¡ˆã€‚

## ğŸ”§ æŠ€è¡“å¯¦ç¾

### 1. æ ¸å¿ƒæ¨¡çµ„

```
src/seal/
â”œâ”€â”€ mod.rs              # æ¨¡çµ„å°å‡º
â”œâ”€â”€ types.rs            # Seal ç›¸é—œé¡å‹å®šç¾©
â””â”€â”€ decryption.rs       # è§£å¯†æ ¸å¿ƒé‚è¼¯
```

### 2. æ•¸æ“šæµç¨‹

```
ç”¨æˆ¶é¸æ“‡ Sculpt
    â†“
æª¢æŸ¥ is_encrypted æ¨™è¨˜
    â†“
å¾ Walrus ä¸‹è¼‰åŠ å¯†æ–‡ä»¶
    â†“
ä½¿ç”¨ SealDecryptor è§£å¯†
    â†“
ä¿å­˜ç‚ºå¯åˆ—å°çš„ STL
    â†“
ç™¼é€åˆ° 3D åˆ—å°æ©Ÿ
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å‰ç½®æ¢ä»¶

1. **Sui éŒ¢åŒ…é…ç½®**ï¼šç¢ºä¿ `~/.sui/sui_config/client.yaml` å­˜åœ¨
2. **åˆ—å°æ©Ÿæˆæ¬Š**ï¼šæ‚¨çš„éŒ¢åŒ…åœ°å€å¿…é ˆåœ¨ Sculpt çš„ç™½åå–®ä¸­
3. **ç¶²çµ¡é€£æ¥**ï¼šèƒ½å¤ è¨ªå• Sui RPC å’Œ Seal Key Servers

### æ“ä½œæ­¥é©Ÿ

1. **å•Ÿå‹• Eureka TUI**
   ```bash
   cd tui-app
   cargo run
   ```

2. **é¸æ“‡åŠ å¯†çš„ Sculpt**
   - åœ¨ä¸»ç•Œé¢ä½¿ç”¨ â†‘/â†“ éµé¸æ“‡æ¨¡å‹
   - åŠ å¯†çš„æ¨¡å‹æœƒåœ¨æ—¥èªŒä¸­é¡¯ç¤º ğŸ” æ¨™è¨˜

3. **è‡ªå‹•è§£å¯†**
   - æŒ‰ `p` éµé–‹å§‹åˆ—å°æµç¨‹
   - ç³»çµ±æœƒè‡ªå‹•æª¢æ¸¬åŠ å¯†æ–‡ä»¶ä¸¦è§£å¯†
   - è§£å¯†é€²åº¦æœƒåœ¨ Print Output å€åŸŸé¡¯ç¤º

4. **æŸ¥çœ‹æ—¥èªŒ**
   ```
   [LOG] ğŸ” Encrypted model detected, attempting to decrypt...
   [LOG] ğŸ” Seal Resource ID: 0xabc123...
   [LOG] ğŸ” Initializing Seal decryption service...
   [LOG] ğŸ” Decrypting with package_id: 0x...
   [LOG] âœ… Model decrypted successfully
   ```

## ğŸ” å®‰å…¨æ©Ÿåˆ¶

### Session Key æ©Ÿåˆ¶

- é¡ä¼¼ JWT çš„çŸ­æœŸæˆæ¬Šä»¤ç‰Œ
- TTL: 5 åˆ†é˜
- éŒ¢åŒ…åªéœ€ç°½åä¸€æ¬¡ï¼Œæ¸›å°‘ç”¨æˆ¶äº¤äº’

### ç™½åå–®é©—è­‰

- èª¿ç”¨åˆç´„çš„ `seal_approve_printer` å‡½æ•¸
- åªæœ‰æˆæ¬Šçš„åœ°å€æ‰èƒ½è§£å¯†
- æ¯æ¬¡è§£å¯†éƒ½æœƒé©—è­‰æ¬Šé™

### éŒ¯èª¤è™•ç†

ç³»çµ±æœƒè™•ç†ä»¥ä¸‹æƒ…æ³ï¼š
- âŒ æœªæˆæ¬Šçš„è¨ªå• â†’ é¡¯ç¤ºéŒ¯èª¤ï¼Œä¸å…è¨±åˆ—å°
- âŒ ç¶²çµ¡å•é¡Œ â†’ é‡è©¦æ©Ÿåˆ¶
- âŒ æ–‡ä»¶æå£ â†’ æ¸…æ™°çš„éŒ¯èª¤æç¤º
- âš ï¸  æœªåŠ å¯†æ–‡ä»¶ â†’ è‡ªå‹•è·³éè§£å¯†æ­¥é©Ÿ

## ğŸ“Š Sculpt æ•¸æ“šçµæ§‹æ›´æ–°

### SculptItem æ–°å¢å­—æ®µ

```rust
pub struct SculptItem {
    pub alias: String,
    pub blob_id: String,
    pub printed_count: u64,
    pub id: String,
    pub is_encrypted: bool,              // ğŸ†• æ˜¯å¦åŠ å¯†
    pub seal_resource_id: Option<String>, // ğŸ†• Seal è³‡æº ID
}
```

### åˆç´„ç«¯ï¼ˆArchimetersï¼‰éœ€è¦æ·»åŠ 

```move
// åœ¨ Sculpt çµæ§‹ä¸­æ·»åŠ 
struct Sculpt has key, store {
    id: UID,
    alias: String,
    structure: String,
    printed: u64,
    seal_resource_id: Option<String>, // ğŸ†• æ–°å¢å­—æ®µ
}
```

## ğŸ§ª æ¸¬è©¦æŒ‡å—

### å–®å…ƒæ¸¬è©¦

```bash
cd tui-app
cargo test seal
```

### é›†æˆæ¸¬è©¦å ´æ™¯

#### å ´æ™¯ 1: è§£å¯†å·²æˆæ¬Šçš„ Sculpt

```bash
# 1. ç¢ºä¿éŒ¢åŒ…åœ¨ç™½åå–®ä¸­
# 2. é¸æ“‡åŠ å¯†çš„ Sculpt
# 3. æŒ‰ 'p' é–‹å§‹åˆ—å°
# 4. é©—è­‰è§£å¯†æˆåŠŸ
```

#### å ´æ™¯ 2: å˜—è©¦è§£å¯†æœªæˆæ¬Šçš„ Sculpt

```bash
# 1. ä½¿ç”¨æœªæˆæ¬Šçš„éŒ¢åŒ…
# 2. é¸æ“‡åŠ å¯†çš„ Sculpt
# 3. æŒ‰ 'p' é–‹å§‹åˆ—å°
# 4. æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯
```

#### å ´æ™¯ 3: è™•ç†æœªåŠ å¯†çš„ Sculpt

```bash
# 1. é¸æ“‡æœªåŠ å¯†çš„ Sculpt (is_encrypted = false)
# 2. æŒ‰ 'p' é–‹å§‹åˆ—å°
# 3. æ‡‰è©²ç›´æ¥åˆ—å°ï¼Œè·³éè§£å¯†æ­¥é©Ÿ
```

## ğŸ› æ•…éšœæ’é™¤

### å•é¡Œ 1: "Failed to create session key"

**åŸå› **: éŒ¢åŒ…é…ç½®ä¸æ­£ç¢ºæˆ–ç„¡æ³•è¨ªå•

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æª¢æŸ¥éŒ¢åŒ…é…ç½®
cat ~/.sui/sui_config/client.yaml

# ç¢ºä¿æœ‰æ´»èºçš„åœ°å€
sui client active-address
```

### å•é¡Œ 2: "Decryption failed: permission denied"

**åŸå› **: æ‚¨çš„åœ°å€ä¸åœ¨ç™½åå–®ä¸­

**è§£æ±ºæ–¹æ¡ˆ**:
1. è¯ç¹« Sculpt æ“æœ‰è€…
2. è«‹æ±‚å°‡æ‚¨çš„åœ°å€æ·»åŠ åˆ°ç™½åå–®
3. æˆ–è€…ä½¿ç”¨ Archimeters å‰ç«¯è‡ªè¡Œæ·»åŠ 

### å•é¡Œ 3: "Failed to download from Walrus"

**åŸå› **: ç¶²çµ¡å•é¡Œæˆ– Walrus æœå‹™ä¸å¯ç”¨

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æ¸¬è©¦ Walrus é€£æ¥
curl -I https://aggregator.walrus-testnet.walrus.space/v1/health
```

### å•é¡Œ 4: ç·¨è­¯éŒ¯èª¤

**åŸå› **: ä¾è³´ç‰ˆæœ¬è¡çªæˆ–ç¶²çµ¡å•é¡Œ

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æ¸…ç†ä¸¦é‡æ–°ç·¨è­¯
cargo clean
rm Cargo.lock
cargo build
```

## ğŸ“ é–‹ç™¼ç­†è¨˜

### ä¾è³´ç‰ˆæœ¬

- `seal-sdk-rs`: v0.0.2
- `sui-sdk`: main branch (from MystenLabs/sui)
- `reqwest`: 0.11 (ç”¨æ–¼ Walrus ä¸‹è¼‰)

### å·²çŸ¥é™åˆ¶

1. **Session Key éæœŸ**: 5 åˆ†é˜å¾Œéœ€è¦é‡æ–°å‰µå»º
2. **å–®æ–‡ä»¶è§£å¯†**: ç›®å‰åªæ”¯æŒå–®å€‹æ–‡ä»¶ï¼Œä¸æ”¯æŒæ‰¹é‡
3. **éŒ¢åŒ…ä¾è³´**: å¿…é ˆæœ‰æœ¬åœ° Sui éŒ¢åŒ…é…ç½®

### æœªä¾†æ”¹é€²

- [ ] æ”¯æŒæ‰¹é‡è§£å¯†
- [ ] Session Key ç·©å­˜å’Œè‡ªå‹•çºŒæœŸ
- [ ] æ›´å‹å¥½çš„éŒ¯èª¤æç¤º
- [ ] è§£å¯†é€²åº¦æ¢
- [ ] æ”¯æŒä¸åŒç¶²çµ¡ï¼ˆmainnet/devnet/testnetï¼‰

## ğŸ”— ç›¸é—œè³‡æº

- [Seal SDK æ–‡æª”](https://seal-docs.wal.app/)
- [Seal Rust SDK GitHub](https://github.com/gfusee/seal-sdk-rs)
- [Archimeters é …ç›®](https://github.com/your-org/archimeters-1)

## ğŸ“ è¯ç¹«æ”¯æŒ

é‡åˆ°å•é¡Œï¼Ÿ
1. æŸ¥çœ‹æ—¥èªŒè¼¸å‡ºï¼ˆPrint Output å€åŸŸï¼‰
2. æª¢æŸ¥éŒ¢åŒ…å’Œç¶²çµ¡é…ç½®
3. è¯ç¹«é–‹ç™¼åœ˜éšŠ

---

**æœ€å¾Œæ›´æ–°**: 2025-11-10
**ç‰ˆæœ¬**: v0.1.0

